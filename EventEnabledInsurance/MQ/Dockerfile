FROM cp.stg.icr.io/cp/ibm-mqadvanced-server-integration@sha256:d64782959306134778612d3e14cce1bef43cfd35910227a3a90d7dce95168f75
RUN echo -e "\
  DEFINE QLOCAL('QuoteBO') DEFPSIST(YES) \n\
  DEFINE QLOCAL('Quote') DEFPSIST(YES) BOQNAME('QuoteBO') BOTHRESH(99) \n\
  DEFINE CHANNEL(ACE_SVRCONN) CHLTYPE(SVRCONN) TRPTYPE(TCP) SSLCAUTH(REQUIRED) SSLCIPH('ECDHE_RSA_AES_128_CBC_SHA256') \n\
  ALTER AUTHINFO(SYSTEM.DEFAULT.AUTHINFO.IDPWOS) AUTHTYPE(IDPWOS) ADOPTCTX(YES) CHCKCLNT(OPTIONAL) CHCKLOCL(OPTIONAL) AUTHENMD(OS) \n\
  SET CHLAUTH('ACE_SVRCONN') TYPE(SSLPEERMAP) SSLPEER('CN=application1,OU=app team1') USERSRC(MAP) MCAUSER('mqm') ACTION(ADD) \n\
  REFRESH SECURITY TYPE(CONNAUTH) \n\
  SET AUTHREC PRINCIPAL('mqm') OBJTYPE(QMGR) AUTHADD(CONNECT,INQ) \n\
  SET AUTHREC PROFILE('QuoteBO') PRINCIPAL('mqm') OBJTYPE(QUEUE) AUTHADD(PASSALL,BROWSE,GET,INQ,PUT) \n\
  SET AUTHREC PROFILE('Quote') PRINCIPAL('mqm') OBJTYPE(QUEUE) AUTHADD(BROWSE,GET,INQ,PUT) \n\
  REFRESH SECURITY" >/etc/mqm/aceldap.mqsc
RUN cat /etc/mqm/aceldap.mqsc
